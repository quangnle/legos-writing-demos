<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Homomorphic Encryption Demo</title>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script> <!-- TH√äM TH∆Ø VI·ªÜN MARKED.JS -->
    <link rel="stylesheet" href="main.css">
</head>
<body>

<div class="container">
    <h1><span class="emoji">üõ°Ô∏è</span> Interactive Homomorphic Encryption Demo</h1>

    <label for="secretS">Nh·∫≠p m·ªôt con s·ªë b√≠ m·∫≠t (s):</label>
    <input type="number" id="secretS" value="24">

    <div class="tabs">
        <button class="tab-button active" onclick="openTab(event, 'rsaTab')"><span class="emoji">‚úñÔ∏è</span> RSA (Ph√©p nh√¢n)</button>
        <button class="tab-button" onclick="openTab(event, 'paillierTab')"><span class="emoji">‚ûï</span> Paillier (Ph√©p c·ªông)</button>
    </div>

    <!-- RSA Tab Content -->
    <div id="rsaTab" class="tab-content active">
        <h2>M√£ h√≥a ƒë·ªìng c·∫•u tr√™n ph√©p nh√¢n (RSA) <button class="gemini-button" onclick="explainConcept('RSA')">‚ú® Gi·∫£i th√≠ch</button></h2>
        <div class="gemini-output" id="rsaConceptExplanation">H√£y nh·∫•n n√∫t "Gi·∫£i th√≠ch" ƒë·ªÉ t√¨m hi·ªÉu v·ªÅ RSA!</div>

        <div class="section settings-grid">
            <div>
                <label for="rsaP">S·ªë nguy√™n t·ªë p:</label>
                <input type="number" id="rsaP" value="7">
            </div>
            <div>
                <label for="rsaQ">S·ªë nguy√™n t·ªë q:</label>
                <input type="number" id="rsaQ" value="13">
            </div>
            <div>
                <label for="rsaE">S·ªë m≈© c√¥ng khai e:</label>
                <input type="number" id="rsaE" value="5">
            </div>
        </div>
        <button class="generate-key-button" onclick="generateRsaKeys()">T·∫°o Kh√≥a RSA & C·∫≠p nh·∫≠t tham s·ªë</button>
        <p class="params-display result" id="rsaParamsDisplay">Ch∆∞a t·∫°o kh√≥a.</p>

        <div class="section">
            <h3>T√°ch gi√° tr·ªã s th√†nh c√°c ph·∫ßn (s = s<sub>1</sub> * s<sub>2</sub> * ... * s<sub>k</sub> mod n)</h3>
            <div id="rsaPartsContainer">
                <!-- Parts will be added here by JavaScript -->
            </div>
            <button class="add-part-button" onclick="handleAddRsaPart()">Th√™m 1 ph·∫ßn</button>
            <button onclick="calculateRsaHomomorphic()">T√≠nh to√°n ƒë·ªìng c·∫•u RSA</button>
        </div>

        <label>C√°c ph·∫ßn ƒë√£ m√£ h√≥a (c<sub>i</sub> = s<sub>i</sub><sup>e</sup> mod n):</label>
        <textarea id="rsaEncryptedParts" readonly></textarea>

        <label>M√£ h√≥a g·ªôp (C = c<sub>1</sub> * c<sub>2</sub> * ... * c<sub>k</sub> mod n):</label>
        <textarea id="rsaCombinedCiphertext" readonly></textarea>

        <div style="display: flex; align-items: center; justify-content: space-between;">
             <label style="margin-top:0;">Gi·∫£i m√£ ƒë·ªÉ t√¨m b√≠ m·∫≠t s (s' = C<sup>d</sup> mod n):</label>
             <button class="gemini-button" onclick="interpretRsaResult()">‚ú® Di·ªÖn gi·∫£i K·∫øt qu·∫£</button>
        </div>
        <p class="result" id="rsaDecryptedResult"></p>
        <div class="gemini-output" id="rsaResultInterpretation">K·∫øt qu·∫£ gi·∫£i m√£ v√† di·ªÖn gi·∫£i s·∫Ω xu·∫•t hi·ªán ·ªü ƒë√¢y.</div>
        <p class="error" id="rsaError"></p>
    </div>

    <!-- Paillier Tab Content -->
    <div id="paillierTab" class="tab-content">
        <h2>M√£ h√≥a ƒë·ªìng c·∫•u tr√™n ph√©p c·ªông (Paillier) <button class="gemini-button" onclick="explainConcept('Paillier')">‚ú® Gi·∫£i th√≠ch</button></h2>
        <div class="gemini-output" id="paillierConceptExplanation">H√£y nh·∫•n n√∫t "Gi·∫£i th√≠ch" ƒë·ªÉ t√¨m hi·ªÉu v·ªÅ Paillier!</div>

         <div class="section settings-grid">
            <div>
                <label for="paillierP">S·ªë nguy√™n t·ªë p:</label>
                <input type="number" id="paillierP" value="5">
            </div>
            <div>
                <label for="paillierQ">S·ªë nguy√™n t·ªë q:</label>
                <input type="number" id="paillierQ" value="7">
            </div>
        </div>
        <button class="generate-key-button" onclick="generatePaillierKeys()">T·∫°o Kh√≥a Paillier & C·∫≠p nh·∫≠t tham s·ªë</button>
        <p class="params-display result" id="paillierParamsDisplay">Ch∆∞a t·∫°o kh√≥a.</p>

        <div class="section">
            <h3>T√°ch gi√° tr·ªã s th√†nh c√°c ph·∫ßn (s = s<sub>1</sub> + s<sub>2</sub> + ... * s<sub>k</sub> mod n)</h3>
            <div id="paillierPartsContainer">
                <!-- Parts will be added here by JavaScript -->
            </div>
            <button class="add-part-button" onclick="handleAddPaillierPart()">Th√™m 1 ph·∫ßn</button>
            <button onclick="calculatePaillierHomomorphic()">T√≠nh to√°n ƒë·ªìng c·∫•u Paillier</button>
        </div>
        
        <label>C√°c ph·∫ßn ƒë√£ m√£ h√≥a (c<sub>i</sub> = g<sup>s<sub>i</sub></sup> * r<sub>i</sub><sup>n</sup> mod n<sup>2</sup>, demo n√†y d√πng r=1):</label>
        <textarea id="paillierEncryptedParts" readonly></textarea>

        <label>M√£ h√≥a g·ªôp (C = c<sub>1</sub> * c<sub>2</sub> * ... * c<sub>k</sub> mod n<sup>2</sup>):</label>
        <textarea id="paillierCombinedCiphertext" readonly></textarea>

        <div style="display: flex; align-items: center; justify-content: space-between;">
            <label style="margin-top:0;">Gi·∫£i m√£ ƒë·ªÉ t√¨m b√≠ m·∫≠t s (s' = L(C<sup>&lambda;</sup> mod n<sup>2</sup>) * &mu; mod n):</label>
            <button class="gemini-button" onclick="interpretPaillierResult()">‚ú® Di·ªÖn gi·∫£i K·∫øt qu·∫£</button>
        </div>
        <p class="result" id="paillierDecryptedResult"></p>
        <div class="gemini-output" id="paillierResultInterpretation">K·∫øt qu·∫£ gi·∫£i m√£ v√† di·ªÖn gi·∫£i s·∫Ω xu·∫•t hi·ªán ·ªü ƒë√¢y.</div>
        <p class="error" id="paillierError"></p>
    </div>
</div>
<script src="index.js"></script>
</body>
</html>
